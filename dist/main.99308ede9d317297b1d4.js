!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var t={elements:{header:null,p:null,main:null,textarea:null,keysContainer:null,keys:[]},eventHandlers:{oninput:null,onclose:null},properties:{value:"",capsLock:!1},createDom:function(){var e=this;this.elements.header=document.createElement("header"),this.elements.p=document.createElement("p"),this.elements.p.innerText="Клавиатура создавалась на Windows",this.elements.main=document.createElement("main"),this.elements.textarea=document.createElement("textarea"),this.elements.keysContainer=document.createElement("div"),this.elements.header.className="header",this.elements.p.className="header__text",this.elements.main.className="main",this.elements.textarea.className="textarea",this.elements.keysContainer.className="keyboard-container",this.elements.keys=this.elements.keysContainer.querySelectorAll(".btn"),document.body.appendChild(this.elements.header),document.body.appendChild(this.elements.main),this.elements.header.appendChild(this.elements.p),this.elements.main.appendChild(this.elements.textarea),this.elements.main.appendChild(this.elements.keysContainer),this.elements.keysContainer.appendChild(this.createKeys()),document.querySelectorAll(".textarea").forEach((function(t){t.addEventListener("focus",(function(){e.open(t.value,(function(e){t.value=e}))}))}))},createKeys:function(){var e=this,t=document.createDocumentFragment(),n=function(e){return'<i class="material-icons">'.concat(e,"</i>")};return["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Delete","caps lock","a","s","d","f","g","h","j","k","l","; ","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","Up","Shift","ctrl","win","alt","Space","alt","Left","Down","Right","ctrl"].forEach((function(s,a){var i=document.createElement("button");switch(i.setAttribute("type","button"),i.classList.add("btn"),42===a&&i.classList.add("btn-shift-left"),53===a&&i.classList.add("btn-up"),53===a&&i.setAttribute("btnname","ArrowUp"),54===a&&i.classList.add("btn-shift-right"),55===a&&i.classList.add("btn-ctrl-left"),56===a&&i.setAttribute("btnname","Meta"),57===a&&i.classList.add("btn-alt-left"),59===a&&i.classList.add("btn-alt-right"),60===a&&i.classList.add("btn-left"),60===a&&i.setAttribute("btnname","ArrowLeft"),61===a&&i.classList.add("btn-down"),61===a&&i.setAttribute("btnname","ArrowDown"),62===a&&i.classList.add("btn-right"),62===a&&i.setAttribute("btnname","ArrowRight"),63===a&&i.classList.add("btn-ctrl-right"),s){case"Backspace":i.classList.add("btn-backspace"),i.innerHTML=n("Backspace"),i.addEventListener("click",(function(){e.properties.value=e.properties.value.substring(0,e.properties.value.length-1),e.triggerEvent("oninput")}));break;case"caps lock":i.classList.add("btn-capslock"),i.innerHTML=n("Caps Lock"),i.addEventListener("click",(function(){e.toggleCapsLock(),i.classList.toggle("active",e.properties.capsLock)}));break;case"Enter":i.classList.add("btn-enter"),i.innerHTML=n("Enter"),i.addEventListener("click",(function(){e.properties.value+="\n",e.triggerEvent("oninput")}));break;case"Space":i.classList.add("btn-space"),i.innerHTML=n("Space"),i.addEventListener("click",(function(){e.properties.value+=" ",e.triggerEvent("oninput")}));break;case"Tab":i.classList.add("btn-tab"),i.innerHTML=n("Tab"),i.addEventListener("click",(function(){e.properties.value+="  ",e.triggerEvent("oninput")}));break;case"Delete":i.classList.add("btn-del"),i.innerHTML=n("Delete"),i.addEventListener("click",(function(){e.properties.value=e.properties.value.substring(0,e.properties.value.length-1),e.triggerEvent("oninput")}));break;case"Shift":i.classList.add("btn-shift"),i.innerHTML=n("Shift");break;case"ctrl":i.classList.add("btn-ctrl"),i.innerHTML=n("ctrl");break;case"alt":i.classList.add("btn-alt"),i.innerHTML=n("alt");break;case"win":i.classList.add("btn-win"),i.innerHTML=n("win");break;default:i.textContent=s.toLowerCase(),i.addEventListener("click",(function(){e.properties.value+=e.properties.capsLock?s.toUpperCase():s.toLowerCase(),e.triggerEvent("oninput")}))}t.appendChild(i)})),t},triggerEvent:function(e){"function"==typeof this.eventHandlers[e]&&this.eventHandlers[e](this.properties.value)},toggleCapsLock:function(){this.properties.capsLock=!this.properties.capsLock;var t,n=function(t,n){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,n){if(t){if("string"==typeof t)return e(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){s&&(t=s);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var e=s.next();return c=e.done,e},e:function(e){o=!0,r=e},f:function(){try{c||null==s.return||s.return()}finally{if(o)throw r}}}}(this.elements.keys);try{for(n.s();!(t=n.n()).done;){var s=t.value;0===s.childElementCount&&(s.textContent=this.properties.capsLock?s.textContent.toUpperCase():s.textContent.toLowerCase())}}catch(e){n.e(e)}finally{n.f()}},open:function(e,t,n){this.properties.value=e||"",this.eventHandlers.oninput=t,this.eventHandlers.onclose=n},close:function(){this.properties.value="",this.eventHandlers.oninput=oninput,this.eventHandlers.onclose=onclose}};window.addEventListener("DOMContentLoaded",(function(){t.createDom()}));for(var n=document.querySelectorAll(".btn"),s=0;s<n.length;s++)n[s].setAttribute("btnname",n[s].innerText),n[s].setAttribute("lowerCaseName",n[s].innerText.toLowerCase());window.addEventListener("keydown",(function(e){for(var t=0;t<n.length;t++)e.key!==n[t].getAttribute("btnname")&&e.key!==n[t].getAttribute("lowerCaseName")||n[t].classList.add("active"),"Space"===e.code&&space.classList.add("active"),"ControlLeft"===e.code&&ctrlLeft.classList.add("active"),"ControlRight"===e.code&&ctrlRight.classList.add("active"),"AltLeft"===e.code&&altLeft.classList.add("active"),"AltRight"===e.code&&altRight.classList.add("active"),"ShiftLeft"===e.code&&btnShiftRight.classList.remove("active"),"ShiftRight"===e.code&&btnShiftLeft.classList.remove("active")})),window.addEventListener("keyup",(function(e){for(var t=function(t){e.key!==n[t].getAttribute("btnname")&&e.key!==n[t].getAttribute("lowerCaseName")||(n[t].classList.remove("active"),n[t].classList.add("remove")),"Space"===e.code&&space.classList.remove("active"),"ControlLeft"===e.code&&ctrlLeft.classList.remove("active"),"ControlRight"===e.code&&ctrlRight.classList.remove("active"),"AltLeft"===e.code&&altLeft.classList.remove("active"),"AltRight"===e.code&&altRight.classList.remove("active"),"ShiftLeft"===e.code&&(btnShiftRight.classList.remove("active"),btnShiftRight.classList.remove("remove")),"ShiftRight"===e.code&&(btnShiftLeft.classList.remove("active"),btnShiftLeft.classList.remove("remove")),setTimeout((function(){n[t].classList.remove("remove")}),100)},s=0;s<n.length;s++)t(s)}))}();